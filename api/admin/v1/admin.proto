syntax = "proto3";


import "google/api/annotations.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

option go_package = "api/admin/v1";

// Сервис для работы с докторами
service AdminService {
  // -------------- Статьи ---------------
  rpc GetBlogs(GetBlogsRequest) returns (GetBlogsResponse) {
    option (google.api.http) = {
      get: "/api/v1/admin/blog"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Получение списка статей"
    };
  }
  rpc GetBlogByID(GetBlogByIDRequest) returns (GetBlogByIDResponse) {
    option (google.api.http) = {
      get: "/api/v1/admin/blog/{blog_id}"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Получение информации о статье по ее ID"
    };
  }
  rpc CreateDraftBlog(CreateDraftBlogRequest) returns (CreateDraftBlogResponse) {
    option (google.api.http) = {
      post: "/api/v1/admin/blog/create"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Создание черновика статьи"
    };
  }
  rpc UpdateDraftBlog(UpdateDraftBlogRequest) returns (UpdateDraftBlogResponse) {
    option (google.api.http) = {
      post: "/api/v1/auth/blog/{blog_id}/update"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Обновление статьи"
    };
  }
  rpc SaveBlogImage(SaveBlogImageRequest) returns (SaveBlogImageResponse) {
    option (google.api.http) = {
      post: "/api/v1/auth/blog/{blog_id}/save_image"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Сохранение картинки для статьи"
    };
  }
  rpc DeleteBlogImage(DeleteBlogImageRequest) returns (DeleteBlogImageResponse) {
    option (google.api.http) = {
      post: "/api/v1/auth/blog/{blog_id}/delete_image/{image_id}"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Удаление картинки для статьи"
    };
  }
  // todo поиск, фильтрация
  // -------------- Статьи ---------------
}

message GetBlogsRequest {}

message GetBlogsResponse {
  string blog_id = 1;
  string title = 2;
  bool is_active = 3;
}

message GetBlogByIDRequest {
  string blog_id = 1;
}

message GetBlogByIDResponse {
  string blog_id = 1;
  string slug = 2;
  string title = 3;
  string body = 4;
  bool is_active = 5;
  string preview_text = 6;
  string society_preview = 7;
  string additional_seo_text = 8;
}

message CreateDraftBlogRequest {
  string title = 1;
}

message CreateDraftBlogResponse {
  string blog_id = 1;
}

message UpdateDraftBlogRequest {
  string blog_id = 1;
  string slug = 2;
  string title = 3;
  string body = 4;
  bool is_active = 5;
  string preview_text = 6;
  string society_preview = 7;
  string additional_seo_text = 8;
}

message UpdateDraftBlogResponse {

}

message SaveBlogImageRequest {
  string blog_id = 1;
  bytes image_data = 2;
}

message SaveBlogImageResponse {
  Image image = 1;

  message Image {
    string image_id = 1;
    string image_url = 2;
  }
}

message DeleteBlogImageRequest{
  string blog_id = 1;
  string image_id = 2;
}

message DeleteBlogImageResponse{

}


// doctors
// Get
// Filer
// Search
// Sort
// DoctorDetail
// Create
// Update
// Delete

// cities
// Get
// GetByID
// Sort
// Filter
// Search
// Create
// Update
// Delete

// specialities
// Get
// GetByID
// Sort
// Filter
// Search
// Create
// Update
// Delete

// freelancers
// Get
// GetByID
// Sort
// Filter
// Search
// Create
// Update
// Delete

// cities
// Get
// GetByID
// Sort
// Filter
// Search
// Create
// Update
// Delete

// specialities
// Get
// GetByID
// Sort
// Filter
// Search
// Create
// Update
// Delete

// networks
// Get
// GetByID
// Sort
// Filter
// Search
// Create
// Update
// Delete

//service Admin {
//  rpc GetDoctor(GetDoctorRequest) returns (GetDoctorResponse) {
//    option (google.api.http) = {
//      get: "/api/v1/doctors/{doctor_slug}"
//    };
//    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
//      summary: "Получение детальной информации про доктора"
//    };
//  }
//}